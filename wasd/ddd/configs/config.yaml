# Configuration for Bone Fracture Detection System

# Model Configuration
model:
  input_size: 224
  num_classes: 2  # Fracture, No Fracture
  batch_size: 32
  learning_rate: 0.001
  epochs: 100
  early_stopping_patience: 10
  
  # Model architectures to ensemble
  architectures:
    - name: "efficientnet_b0"
      pretrained: true
      freeze_backbone: false
    - name: "resnet50" 
      pretrained: true
      freeze_backbone: false
    - name: "mobilenet_v3_small"
      pretrained: true
      freeze_backbone: false

# Data Configuration
data:
  dataset_path: "./data"
  train_split: 0.7
  val_split: 0.15
  test_split: 0.15
  
  # Image preprocessing
  image_size: [224, 224]
  normalize_mean: [0.485, 0.456, 0.406]  # ImageNet standards
  normalize_std: [0.229, 0.224, 0.225]
  
  # Data augmentation parameters
  augmentation:
    rotation_limit: 20
    brightness_limit: 0.2
    contrast_limit: 0.2
    blur_limit: 3
    noise_limit: 0.05
    clahe_clip_limit: 2.0

# Training Configuration
training:
  mixed_precision: true
  gradient_clipping: 1.0
  weight_decay: 0.0001
  scheduler: "cosine_annealing"
  warmup_epochs: 5
  
  # Cross-validation
  k_folds: 5
  stratified: true
  
  # Checkpointing
  save_best_only: true
  monitor_metric: "val_f1_score"
  
# Ensemble Configuration
ensemble:
  voting_method: "soft"  # soft, hard, weighted
  weights: [0.4, 0.35, 0.25]  # weights for each model
  
# Evaluation Configuration
evaluation:
  metrics:
    - "accuracy"
    - "precision"
    - "recall"
    - "f1_score"
    - "auc_roc"
    - "confusion_matrix"
  
  # Grad-CAM settings
  gradcam:
    target_layer: "features"
    use_guided: true
    
# Deployment Configuration
deployment:
  model_format: "onnx"  # onnx, torchscript, tensorflow
  quantization: true
  optimization_level: "all"
  
  # Web app settings
  app:
    host: "0.0.0.0"
    port: 8000
    max_file_size: 10  # MB
    allowed_extensions: [".jpg", ".jpeg", ".png", ".dcm"]

# Paths
paths:
  models_dir: "./models"
  logs_dir: "./logs"
  checkpoints_dir: "./models/checkpoints"
  onnx_models_dir: "./models/onnx"
  
# Hardware Configuration
hardware:
  device: "auto"  # auto, cpu, cuda
  num_workers: 4
  pin_memory: true